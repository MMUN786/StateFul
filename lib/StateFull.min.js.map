{"version":3,"sources":["webpack://StateFull/webpack/universalModuleDefinition","webpack://StateFull/./src/Utils/DOM.ts","webpack://StateFull/./src/Configration.ts","webpack://StateFull/./src/Utils/helper.ts","webpack://StateFull/./src/Node/index.ts","webpack://StateFull/./src/Element/index.ts","webpack://StateFull/./src/Element/Collection.ts","webpack://StateFull/./src/index.ts","webpack://StateFull/webpack/bootstrap","webpack://StateFull/webpack/startup"],"names":["root","factory","exports","module","define","amd","self","this","REGEX","removBracket","string","replace","variable","match","Array","from","Set","extractVariables","map","isChanged","Obj1","Obj2","JSON","stringify","newState","newValue","_","key","nodeValue","node","update","State","StateFullElement","Element","element","getAttributeNames","forEach","attr","attrValue","getAttribute","variables","length","push","name","Node","getAttributeNode","childNodes","textNode","rander","prevState","includes","undefined","filter","Boolean","reduce","prev","next","afterDestroy","console","error","window","StateFullElements","QueryORElement","_state","events","elements","multiple","HTMLElement","query","parentElement","ele","document","querySelectorAll","querySelector","Q","Error","returnElement","state","obj","on","event","callback","toString","toLowerCase","destroy","__webpack_module_cache__","__webpack_require__","moduleId","__webpack_modules__"],"mappings":"CAAA,SAA2CA,EAAMC,GAC1B,iBAAZC,SAA0C,iBAAXC,OACxCA,OAAOD,QAAUD,IACQ,mBAAXG,QAAyBA,OAAOC,IAC9CD,OAAO,YAAa,GAAIH,GACE,iBAAZC,QACdA,QAAmB,UAAID,IAEvBD,EAAgB,UAAIC,IARtB,CASmB,oBAATK,KAAuBA,KAAOC,MAAM,WAC9C,M,kCCNO,ICJMC,EAAQ,iBCYRC,EAAe,SAACC,GAAD,mBAC1BA,GAD0B,MAC1BA,EAAQC,SADkB,SAC1BD,EAAQC,QAAU,KAAM,MADE,MAC1B,EAA6BA,aADH,EAC1B,EAA6BA,QAAU,KAAM,KAElCC,EAAW,SAACF,GAAD,OAXQ,SAC9BA,GAEA,IAAIE,EAAQ,MAAGF,GAAH,MAAGA,EAAQG,WAAX,EAAGH,EAAQG,MAAQL,GAE/B,OADWM,MAAMC,KAAK,IAAIC,IAAIJ,IAQ9BK,CAAiBP,GAAQQ,IAAIT,IAElBU,EAAY,SAACC,EAAcC,GAAf,OACvBC,KAAKC,UAAUH,KAAUE,KAAKC,UAAUF,I,i6BCOhCG,GACN,GAAK,EAAAjB,KAAD,GAAJ,CACA,IAAMkB,EAAW,EAAAlB,KAAA,GAAYI,QAAQH,GAAO,SAACkB,EAAQC,GAGnD,OADcH,EAASG,IAAQ,MAI7BF,IAAa,EAAAlB,KAAA,GAAWqB,YAC5B,EAAArB,KAAA,GAAWqB,UAAYH,IAI3B,Q,WA7BE,WAAYI,G,QAAoC,K,EAAA,G,MAAA,4GAF/B,KAGf,EAAAtB,KAAA,EAAasB,GACb,EAAAtB,KAAA,GAAkB,MAAJsB,OAAA,EAAAA,EAAMD,YAAa,IACjC,EAAArB,KAAA,UAAAA,KAAA,EAAaA,KAAb,I,mBAGFuB,OAAA,SAAON,GACL,IAAMO,EAAQ,EAAH,KAAQxB,KAAR,GAAwBiB,GAE9BL,EAAU,EAAAZ,KAAD,GAAciB,KAE5B,EAAAjB,KAAA,UAAAA,KAAawB,GAEb,EAAAxB,KAAA,EAAcwB,K,sYCZZC,E,WAGJ,WAAYC,GAAsB,uCAFP,KAEO,4BAIX,SAACC,GAEtBA,EAAQC,oBAAoBC,SAAQ,SAACC,GACnC,IAAMC,EAAYJ,EAAQK,aAAaF,GACjCG,EAAY5B,EAAS0B,GAEtBE,EAAUC,QACf,IAAI,GAAOC,KAAK,CACdC,KAAM,OACNH,YACAX,KAAM,IAAIe,EAAKV,EAAQW,iBAAiBR,SAK5CH,EAAQY,WAAWV,SAAQ,SAACW,GAC1B,GAAKA,EAASnB,UAAd,CACA,IAAMY,EAAY5B,EAASmC,EAASnB,WAE/BY,EAAUC,QACf,IAAI,GAAOC,KAAK,CACdC,KAAM,UACNH,YACAX,KAAM,IAAIe,EAAKG,YA1BnB,EAAAxC,KAAA,QAAAA,KAA0B0B,G,mBA+BrBe,OAAP,SAAcxB,EAAkByB,GAE9B,EAAA1C,KAAA,GAAW6B,SAAQ,YAAoC,IAAjCP,EAAiC,EAAjCA,KAEhBqB,EAFiD,EAA3BV,UAGvBtB,KAAI,SAACN,GAAD,OAAuBY,EAASZ,GAAYA,OAAWuC,KAC3DC,OAAOC,SACLH,EAAST,SAGdS,EAAWA,EAERhC,KAAI,SAACN,GAAD,OACHY,EAASZ,KAAcqC,EAAUrC,GAAYA,OAAWuC,KAEzDC,OAAOC,SAELH,EAAST,SAEdS,EAAWA,EAASI,QAAO,SAACC,EAAcC,GAGxC,OADAD,EAAKC,GAAQhC,EAASgC,GACfD,IACN,IAEH1B,EAAKC,OAAOoB,S,KAKlB,U,gNCrEA,IAAMO,EAAe,WACnBC,QAAQC,MAAM,iCCJhBC,OAAOC,kBDOP,SAA2BC,GACzB,IAAIC,EAAc,GACdC,EAAc,GAEdC,EAAgBnD,MAAMC,KLmCC,SAC3BmB,EACAgC,GAEA,QADsB,IADtBA,OAAW,GAEPhC,aAAmBiC,YAAa,OAAOjC,EAC3C,IA7CmCkC,EAAOC,EAAR,EA6C5BC,EAAMJ,GA7CuBE,EA6CTlC,OA7CQ,IAAQmC,MAAgBE,UAAxB,SAClCF,IADkC,MAClC,EAAeG,sBADmB,EAClC,EAAeA,iBAAmBJ,IAPF,SAACA,EAAOC,GAAR,sBAAQA,MAAgBE,UAAxB,SAChCF,IADgC,MAChC,EAAeI,mBADiB,EAChC,EAAeA,cAAgBL,GAkDMM,CAAExC,GACvC,GAAuB,iBAAZA,GAAwBoC,EAAK,OAAOA,EAC1C,MAAM,IAAIK,MAAM,wBK1CUC,CAAcd,GAAgB,IAC7DG,EAAWA,EAAS/C,KAAI,SAACoD,GAAD,OAAS,IAAIrC,EAAQqC,MAE7C,IAKIxC,EAAc,SAACN,GAAqB,QAChCO,EAAQ,KAAKgC,EAAWvC,GACzBL,EAAU4C,EAAQvC,KAEvByC,EAAS7B,SAAQ,SAACkC,GAAD,OAAkBA,EAAItB,OAAOxB,EAAUuC,MAExD,YAAAC,GAAM,SAAN,SAAmBjC,EAAOgC,GAE1BA,EAAShC,IAcX,MAAO,CACL8C,MA5BY,SAACrD,GHGO,IAACsD,EGDrB,OHEM,QADeA,EGFRtD,IHGCsD,GAAsB,iBAARA,GGHJhD,EAAON,GACxBuC,GA2BPgB,GAbO,SAACC,EAAeC,GAAhB,OACNjB,EAAOgB,EAAME,WAAWC,eAAiBF,GAa1CG,QAXmB,WACnBrB,OAASZ,EACTc,OAAWd,EACXa,OAASb,EAETrB,EAAS2B,OEzCT4B,EAA2B,GCE/B,ODCA,SAASC,EAAoBC,GAE5B,GAAGF,EAAyBE,GAC3B,OAAOF,EAAyBE,GAAUrF,QAG3C,IAAIC,EAASkF,EAAyBE,GAAY,CAGjDrF,QAAS,IAOV,OAHAsF,EAAoBD,GAAUpF,EAAQA,EAAOD,QAASoF,GAG/CnF,EAAOD,QCjBRoF,CAAoB,K","file":"StateFull.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"StateFull\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"StateFull\"] = factory();\n\telse\n\t\troot[\"StateFull\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn ","// Dom Slector\ninterface ElementSelector {\n  (query: string, parentElement?: ParentNode): HTMLElement | null;\n}\nexport const Q: ElementSelector = (query, parentElement = document) =>\n  parentElement?.querySelector?.(query);\n\ninterface ElementsSelector {\n  (query: string, parentElement?: ParentNode): NodeList;\n}\nexport const QA: ElementsSelector = (query, parentElement = document) =>\n  parentElement?.querySelectorAll?.(query);\n\n// Class List\ninterface ClassMethodForElement {\n  (\n    element: HTMLElement | null,\n    method?: \"add\" | \"remove\" | \"contains\" | \"toggle\",\n    className?: string\n  ): Boolean | void;\n}\nexport const C: ClassMethodForElement = (\n  element = document.body,\n  method = \"toggle\",\n  className = \"active\"\n) => element?.classList?.[method]?.(className);\n\ninterface ClassMethodForElements {\n  (\n    element: [] | NodeList | null,\n    method?: \"add\" | \"remove\" | \"contains\" | \"toggle\",\n    className?: string\n  ): Boolean | void;\n}\nexport const CA: ClassMethodForElements = (\n  element = [],\n  method = \"toggle\",\n  className = \"active\"\n) => element?.forEach?.((ele: any) => C(ele, method, className));\n\n// // Find DOM Element\n\ninterface FindeElement {\n  (element: HTMLElement, query: string): HTMLElement | null;\n}\n\nexport const F: FindeElement = (element = document.body, query = \"div\") =>\n  element?.closest?.(query);\n\n/* Dom Helper Function */\nexport const returnElement = (\n  element: string | any,\n  multiple = false\n): HTMLElement | any => {\n  if (element instanceof HTMLElement) return element;\n  const ele = multiple ? QA(element) : Q(element);\n  if (typeof element === \"string\" && ele) return ele;\n  else throw new Error(\"Element is not valid\");\n};\n","export const REGEX = /\\{\\{(.*?)\\}\\}/g;\n","// @ts-ignore\n\nimport { REGEX } from \"../Configration.ts\";\n\nexport const extractVariables = (\n  string: string | null | undefined\n): string[] => {\n  let variable = string?.match?.(REGEX);\n  variable = Array.from(new Set(variable));\n  return variable;\n};\n\nexport const removBracket = (string: string): string =>\n  string?.replace?.(/{/g, \"\")?.replace?.(/}/g, \"\");\n\nexport const variable = (string: string | null | undefined): string[] =>\n  extractVariables(string).map(removBracket);\n\nexport const isChanged = (Obj1: Object, Obj2: Object): boolean =>\n  JSON.stringify(Obj1) !== JSON.stringify(Obj2);\n\nexport const isObject = (obj: any): boolean =>\n  obj !== null && obj && typeof obj === \"object\";\n\nexport function destroy(obj) {\n  for (var prop in obj) {\n    var property = obj[prop];\n    if (property != null && typeof property == \"object\") {\n      destroy(property);\n    } else {\n      delete obj[prop];\n    }\n  }\n  obj.__proto__ = null;\n}\n","// @ts-ignore\nimport { isChanged } from \"../Utils/helper.ts\";\n// @ts-ignore\nimport { REGEX } from \"../Configration.ts\";\n\nclass StateFullNode {\n  #node: Node | ChildNode | undefined;\n  #value: string;\n  #state: Object = {};\n\n  constructor(node: Node | ChildNode | undefined) {\n    this.#node = node;\n    this.#value = node?.nodeValue || \"\";\n    this.#rander(this.#state);\n  }\n\n  update(newState: Object) {\n    const State = { ...this.#state, ...newState };\n\n    if (!isChanged(this.#state, newState)) return;\n\n    this.#rander(State);\n\n    this.#state = State;\n  }\n\n  #rander(newState: Object) {\n    if (!this.#node) return;\n    const newValue = this.#value.replace(REGEX, (_: any, key: String): any => {\n      // @ts-ignore\n      const value = newState[key] || \"\";\n      return value;\n    });\n\n    if (newValue === this.#node.nodeValue) return;\n    this.#node.nodeValue = newValue;\n  }\n}\n\nexport default StateFullNode;\n","// @ts-ignore\nimport { variable, isChanged, isObject } from \"../Utils/helper.ts\";\n// @ts-ignore\nimport Node from \"../Node/index.ts\";\n\ninterface INodeData {\n  name: string;\n  variables: string[];\n  node: any;\n}\n\nclass StateFullElement {\n  #node: [INodeData] | any = [];\n\n  constructor(Element: HTMLElement) {\n    this.#genrateDynamicNodes(Element);\n  }\n\n  #genrateDynamicNodes = (element: HTMLElement | any) => {\n    //  Select Dynamic attr Nodes\n    element.getAttributeNames().forEach((attr: string) => {\n      const attrValue = element.getAttribute(attr);\n      const variables = variable(attrValue);\n\n      if (!variables.length) return;\n      this.#node.push({\n        name: \"attr\",\n        variables,\n        node: new Node(element.getAttributeNode(attr)),\n      });\n    });\n\n    //  Select Dynamic Text Nodes\n    element.childNodes.forEach((textNode: Node) => {\n      if (!textNode.nodeValue) return;\n      const variables = variable(textNode.nodeValue);\n\n      if (!variables.length) return;\n      this.#node.push({\n        name: \"element\",\n        variables,\n        node: new Node(textNode),\n      });\n    });\n  };\n\n  public rander(newState: Object, prevState: Object) {\n    // @ts-ignore\n    this.#node.forEach(({ node, variables }: INodeData) => {\n      // @ts-ignore\n      let includes: any = variables\n        .map((variable: string) => (newState[variable] ? variable : undefined))\n        .filter(Boolean);\n      if (!includes.length) return;\n      // @ts-ignore\n\n      includes = includes\n        // @ts-ignore\n        .map((variable) =>\n          newState[variable] !== prevState[variable] ? variable : undefined\n        )\n        .filter(Boolean);\n\n      if (!includes.length) return;\n\n      includes = includes.reduce((prev: Object, next: string) => {\n        // @ts-ignore\n        prev[next] = newState[next];\n        return prev;\n      }, {});\n\n      node.update(includes);\n    });\n  }\n}\n\nexport default StateFullElement;\n","// @ts-ignore\nimport { returnElement } from \"../Utils/DOM.ts\";\n// @ts-ignore\nimport Element from \"./index.ts\";\n// @ts-ignore\nimport { isObject, isChanged } from \"../Utils/helper.ts\";\n\nconst afterDestroy = () => {\n  console.error(\"Element is destroyed already\");\n};\n\nfunction StateFullElements(QueryORElement: String | any) {\n  let _state: any = {};\n  let events: any = {};\n\n  let elements: any = Array.from(returnElement(QueryORElement, true));\n  elements = elements.map((ele) => new Element(ele));\n\n  const state = (newState: any) => {\n    if (isObject(newState)) update(newState);\n    return _state;\n  };\n\n  let update: any = (newState: Object) => {\n    const State = { ..._state, ...newState };\n    if (!isChanged(_state, newState)) return;\n\n    elements.forEach((ele: Element) => ele.rander(newState, _state));\n\n    events[\"update\"]?.(State, _state);\n\n    _state = State;\n  };\n\n  let on = (event: string, callback: Function) =>\n    (events[event.toString().toLowerCase()] = callback);\n\n  const destroy: any = () => {\n    _state = undefined;\n    elements = undefined;\n    events = undefined;\n\n    update = afterDestroy;\n  };\n\n  return {\n    state,\n    on,\n    destroy,\n  };\n}\n\nexport default StateFullElements;\n","// @ts-ignore\nimport ElementCollection from \"./Element/Collection.ts\";\n\n// @ts-ignore\nwindow.StateFullElements = ElementCollection;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// module exports must be returned from runtime so entry inlining is disabled\n// startup\n// Load entry module and return exports\nreturn __webpack_require__(80);\n"],"sourceRoot":""}