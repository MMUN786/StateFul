!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.MyLibrary=t():e.MyLibrary=t()}(self,(()=>(()=>{"use strict";var e={d:(t,r)=>{for(var o in r)e.o(r,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:r[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{default:()=>M});const r=new RegExp(/\{\{(.*?)\}\}/g,"g"),o=e=>{var t,r,o;return null===(o=null===(r=null===(t=null==e?void 0:e.replace)||void 0===t?void 0:t.call(e,/{/g,""))||void 0===r?void 0:r.replace)||void 0===o?void 0:o.call(r,/}/g,"")},n=e=>(e=>{let t=e.match(r);return t=Array.from(new Set(t)),t})(e).map(o),i=(e,t)=>JSON.stringify(e)!==JSON.stringify(t);var a,s,f,c,l,h=function(e,t,r,o,n){if("m"===o)throw new TypeError("Private method is not writable");if("a"===o&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===o?n.call(e,r):n?n.value=r:t.set(e,r),r},d=function(e,t,r,o){if("a"===r&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?o:"a"===r?o.call(e):o?o.value:t.get(e)};s=new WeakMap,f=new WeakMap,c=new WeakMap,a=new WeakSet,l=function(e){if(!d(this,s,"f"))return;const t=d(this,f,"f").replace(r,((t,r)=>{var o;return null!==(o=e[r])&&void 0!==o?o:""}));t!==d(this,s,"f").nodeValue&&(d(this,s,"f").nodeValue=t)};const u=class{constructor(e){var t;a.add(this),s.set(this,void 0),f.set(this,void 0),c.set(this,{}),h(this,s,e,"f"),h(this,f,null!==(t=null==e?void 0:e.textContent)&&void 0!==t?t:"","f"),d(this,a,"m",l).call(this,d(this,c,"f"))}update(e){const t=Object.assign(Object.assign({},d(this,c,"f")),e);i(d(this,c,"f"),e)&&(d(this,a,"m",l).call(this,t),h(this,c,t,"f"))}};var w,p,y=function(e,t,r,o){if("a"===r&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?o:"a"===r?o.call(e):o?o.value:t.get(e)};w=new WeakMap,p=new WeakMap;var m,v,b,g,j,E=function(e,t,r,o){if("a"===r&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?o:"a"===r?o.call(e):o?o.value:t.get(e)},O=function(e,t,r,o,n){if("m"===o)throw new TypeError("Private method is not writable");if("a"===o&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===o?n.call(e,r):n?n.value=r:t.set(e,r),r};m=new WeakMap,v=new WeakMap,b=new WeakMap,g=new WeakMap,j=new WeakMap;const S=class{use(e){E(this,b,"f").push(e)}constructor(e){m.set(this,{}),v.set(this,[]),b.set(this,[]),g.set(this,{}),j.set(this,(e=>{let t=Object.assign(Object.assign({},E(this,m,"f")),e);for(const e of E(this,b,"f"))t=e(E(this,m,"f"),t);if(i(E(this,m,"f"),t)){for(const e of E(this,v,"f"))e.render(t,E(this,m,"f"));O(this,m,t,"f")}})),O(this,v,Array.from(((e,t=!1)=>{if(e instanceof HTMLElement)return e;const r=t?((e,t=document)=>t.querySelectorAll(e))(e):((e,t=document)=>t.querySelector(e))(e);if("string"==typeof e&&r)return r;throw new Error("Element is not valid")})(e,!0)).map((e=>new class{constructor(e){w.set(this,[]),p.set(this,(e=>{e.getAttributeNames().forEach((t=>{const r=e.getAttribute(t),o=n(r);o.length&&y(this,w,"f").push({name:"attr",variables:o,node:new u(e.getAttributeNode(t))})})),e.childNodes.forEach((e=>{if(!e.nodeValue)return;const t=n(e.nodeValue);t.length&&y(this,w,"f").push({name:"element",variables:t,node:new u(e)})}))})),y(this,p,"f").call(this,e)}render(e,t){y(this,w,"f").forEach((({node:r,variables:o})=>{let n=o.filter((t=>e.hasOwnProperty(t)));if(!n.length)return;if(n=n.filter((r=>e[r]!==t[r])),!n.length)return;const i=n.reduce(((t,r)=>(t[r]=e[r],t)),{});r.update(i)}))}}(e))),"f")}getState(){return E(this,m,"f")}setState(e){var t;return null!==(t=e)&&t&&"object"==typeof t&&E(this,j,"f").call(this,e),E(this,m,"f")}destroy(){O(this,m,{},"f"),E(this,v,"f").length=0,O(this,j,(()=>{}),"f")}bindComputed(e){for(const[t,r]of Object.entries(e))Object.defineProperty(this,t,{get:r,enumerable:!0})}bindActions(e){for(const[t,r]of Object.entries(e))this[t]=(...e)=>{const t=Object.assign({},E(this,m,"f"));r.call(this,t,...e),this.setState(t)}}};window.StateSurge=S;const M=S;return t})()));