!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.MyLibrary=t():e.MyLibrary=t()}(self,(()=>(()=>{"use strict";var e={};(e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})})(e);const t=new RegExp(/\{\{(.*?)\}\}/g,"g"),r=e=>{var t,r,n;return null===(n=null===(r=null===(t=null==e?void 0:e.replace)||void 0===t?void 0:t.call(e,/{/g,""))||void 0===r?void 0:r.replace)||void 0===n?void 0:n.call(r,/}/g,"")},n=e=>(e=>{let r=e.match(t);return r=Array.from(new Set(r)),r})(e).map(r),o=(e,t)=>JSON.stringify(e)!==JSON.stringify(t);var i,a,s,f,c,l=function(e,t,r,n,o){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?o.call(e,r):o?o.value=r:t.set(e,r),r},h=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};a=new WeakMap,s=new WeakMap,f=new WeakMap,i=new WeakSet,c=function(e){if(!h(this,a,"f"))return;const r=h(this,s,"f").replace(t,((t,r)=>{var n;return null!==(n=e[r])&&void 0!==n?n:""}));r!==h(this,a,"f").nodeValue&&(h(this,a,"f").nodeValue=r)};const d=class{constructor(e){var t;i.add(this),a.set(this,void 0),s.set(this,void 0),f.set(this,{}),l(this,a,e,"f"),l(this,s,null!==(t=null==e?void 0:e.textContent)&&void 0!==t?t:"","f"),h(this,i,"m",c).call(this,h(this,f,"f"))}update(e){const t=Object.assign(Object.assign({},h(this,f,"f")),e);o(h(this,f,"f"),e)&&(h(this,i,"m",c).call(this,t),l(this,f,t,"f"))}};var u,w,p=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};u=new WeakMap,w=new WeakMap;var m,v,y,b,g,j=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},E=function(e,t,r,n,o){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?o.call(e,r):o?o.value=r:t.set(e,r),r};m=new WeakMap,v=new WeakMap,y=new WeakMap,b=new WeakMap,g=new WeakMap;return window.StateSurge=class{use(e){j(this,y,"f").push(e)}constructor(e){m.set(this,{}),v.set(this,[]),y.set(this,[]),b.set(this,{}),g.set(this,(e=>{let t=Object.assign(Object.assign({},j(this,m,"f")),e);for(const e of j(this,y,"f"))t=e(j(this,m,"f"),t);if(o(j(this,m,"f"),t)){for(const e of j(this,v,"f"))e.render(t,j(this,m,"f"));E(this,m,t,"f")}})),E(this,v,Array.from(((e,t=!1)=>{if(e instanceof HTMLElement)return e;const r=t?((e,t=document)=>t.querySelectorAll(e))(e):((e,t=document)=>t.querySelector(e))(e);if("string"==typeof e&&r)return r;throw new Error("Element is not valid")})(e,!0)).map((e=>new class{constructor(e){u.set(this,[]),w.set(this,(e=>{e.getAttributeNames().forEach((t=>{const r=e.getAttribute(t),o=n(r);o.length&&p(this,u,"f").push({name:"attr",variables:o,node:new d(e.getAttributeNode(t))})})),e.childNodes.forEach((e=>{if(!e.nodeValue)return;const t=n(e.nodeValue);t.length&&p(this,u,"f").push({name:"element",variables:t,node:new d(e)})}))})),p(this,w,"f").call(this,e)}render(e,t){p(this,u,"f").forEach((({node:r,variables:n})=>{let o=n.filter((t=>e.hasOwnProperty(t)));if(!o.length)return;if(o=o.filter((r=>e[r]!==t[r])),!o.length)return;const i=o.reduce(((t,r)=>(t[r]=e[r],t)),{});r.update(i)}))}}(e))),"f")}getState(){return j(this,m,"f")}setState(e){var t;return null!==(t=e)&&t&&"object"==typeof t&&j(this,g,"f").call(this,e),j(this,m,"f")}destroy(){E(this,m,{},"f"),j(this,v,"f").length=0,E(this,g,(()=>{}),"f")}bindComputed(e){for(const[t,r]of Object.entries(e))Object.defineProperty(this,t,{get:r,enumerable:!0})}bindActions(e){for(const[t,r]of Object.entries(e))this[t]=(...e)=>{const t=Object.assign({},j(this,m,"f"));r.call(this,t,...e),this.setState(t)}}},e})()));